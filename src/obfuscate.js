const{minify:mn}=require("terser"),Y=require("fs"),P=require("path"),ec="name-cache.json",nc=Y.existsSync(ec)?JSON.parse(Y.readFileSync(ec,"utf8")):{},cc={compress:!0,mangle:{toplevel:!0,properties:!1},nameCache:nc};async function sc(e,n){const i=Y.readFileSync(e,"utf8"),c=await mn(i,cc);Y.writeFileSync(n,c.code),console.log("Processed:",e)}async function Ji(e,n){Y.existsSync(n)||Y.mkdirSync(n,{recursive:!0});const i=Y.readdirSync(e);for(const c of i){if("dist"===c)continue;const i=P.join(e,c),s=P.join(n,c);Y.lstatSync(i).isDirectory()?await Ji(i,s):c.endsWith(".js")?await sc(i,s):Y.copyFileSync(i,s)}}(async()=>{await Ji("./","./dist"),Y.writeFileSync(ec,JSON.stringify(nc,null,2)),console.log("All done.")})();